"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){function a(e){asyncGeneratorStep(u,n,o,a,i,"next",e)}function i(e){asyncGeneratorStep(u,n,o,a,i,"throw",e)}var u=e.apply(t,r);a(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _jsonwebtoken=_interopRequireDefault(require("jsonwebtoken")),_identity=_interopRequireDefault(require("./identity")),AuthTokenMapper=function e(t){var r=this,n=t.secret,o=t.decorator,a=void 0===o?function(e){return e}:o;_classCallCheck(this,e),_defineProperty(this,"verify",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.t1=_identity.default,e.t2=_jsonwebtoken.default,e.next=5,_jsonwebtoken.default.verify(t,r.secret);case 5:return e.t3=e.sent.identity,e.t4=r.secret,e.next=9,e.t2.verify.call(e.t2,e.t3,e.t4);case 9:return e.t5=e.sent,e.t6=new e.t1(e.t5),e.abrupt("return",e.t0.decorator.call(e.t0,e.t6));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this.secret=n,this.decorator=a};exports.default=AuthTokenMapper;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhUb2tlbk1hcHBlci5qcyJdLCJuYW1lcyI6WyJfanNvbndlYnRva2VuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaWRlbnRpdHkiLCJBdXRoVG9rZW5NYXBwZXIiLCJfcmVmIiwiX3RoaXMiLCJ0aGlzIiwic2VjcmV0IiwiX3JlZiRkZWNvcmF0b3IiLCJkZWNvcmF0b3IiLCJ0b2tlbiIsIl9jbGFzc0NhbGxDaGVjayIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9yZWYyIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJtYXJrIiwiX2NhbGxlZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwidDAiLCJ0MSIsIklkZW50aXR5IiwidDIiLCJqd3QiLCJ2ZXJpZnkiLCJ0MyIsInNlbnQiLCJpZGVudGl0eSIsInQ0IiwiY2FsbCIsInQ1IiwidDYiLCJhYnJ1cHQiLCJzdG9wIiwiX3giLCJhcHBseSIsImFyZ3VtZW50cyJdLCJtYXBwaW5ncyI6Iml4QkFBQSxJQUFBQSxlQUFBQyx1QkFBQUMsUUFBQSxpQkFDQUMsVUFBQUYsdUJBQUFDLFFBQUEsZUFFcUJFLGdCQUNuQixRQUFBQSxHQUFBQyxHQUFvRCxHQUFBQyxHQUFBQyxLQUF0Q0MsRUFBc0NILEVBQXRDRyxPQUFzQ0MsRUFBQUosRUFBOUJLLFVBQUFBLEVBQThCLFNBQUFELEVBQWxCLFNBQUFFLEdBQUssTUFBSUEsSUFBU0YsQ0FBQUcsaUJBQUFMLEtBQUFILEdBQUFTLGdCQUFBTixLQUFBLFNBQUEsV0FBQSxHQUFBTyxHQUFBQyxrQkFBQUMsbUJBQUFDLEtBSHRELFFBQUFDLEdBQUFQLEdBQUEsTUFBQUssb0JBQUFHLEtBQUEsU0FBQUMsR0FBQSxPQUFBLE9BQUFBLEVBQUFDLEtBQUFELEVBQUFFLE1BQUEsSUFBQSxHQUFBLE1BQUFGLEdBQUFHLEdBQUFqQixFQUFBYyxFQUFBSSxHQUFBQyxVQUFBQSxRQUFBTCxFQUFBTSxHQVNVQyxjQUFBQSxRQVRWUCxFQUFBRSxLQUFBLEVBUzRCSyxjQUFBQSxRQUFJQyxPQUFPakIsRUFBT0wsRUFBS0UsT0FUbkQsS0FBQSxHQUFBLE1BQUFZLEdBQUFTLEdBQUFULEVBQUFVLEtBUzREQyxTQVQ1RFgsRUFBQVksR0FTc0UxQixFQUFLRSxPQVQzRVksRUFBQUUsS0FBQSxFQUFBRixFQUFBTSxHQVNjRSxPQVRkSyxLQUFBYixFQUFBTSxHQUFBTixFQUFBUyxHQUFBVCxFQUFBWSxHQUFBLEtBQUEsR0FBQSxNQUFBWixHQUFBYyxHQUFBZCxFQUFBVSxLQUFBVixFQUFBZSxHQUFBLEdBQUFmLEdBQUFJLEdBQUFKLEVBQUFjLElBQUFkLEVBQUFnQixPQUFBLFNBQUFoQixFQUFBRyxHQUFBYixVQUFBdUIsS0FBQWIsRUFBQUcsR0FBQUgsRUFBQWUsSUFBQSxLQUFBLElBQUEsSUFBQSxNQUFBLE1BQUFmLEdBQUFpQixTQUFBbkIsRUFBQVgsUUFHc0QsT0FBQSxVQUFBK0IsR0FBQSxNQUFBeEIsR0FBQXlCLE1BQUFoQyxLQUFBaUMsZ0JBQ2xEakMsS0FBS0MsT0FBU0EsRUFDZEQsS0FBS0csVUFBWUEiLCJmaWxlIjoiYXV0aFRva2VuTWFwcGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IElkZW50aXR5IGZyb20gJy4vaWRlbnRpdHknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoVG9rZW5NYXBwZXIge1xuICBjb25zdHJ1Y3Rvcih7IHNlY3JldCwgZGVjb3JhdG9yID0gdG9rZW4gPT4gdG9rZW4gfSkge1xuICAgIHRoaXMuc2VjcmV0ID0gc2VjcmV0O1xuICAgIHRoaXMuZGVjb3JhdG9yID0gZGVjb3JhdG9yO1xuICB9XG5cbiAgdmVyaWZ5ID0gYXN5bmMgdG9rZW4gPT4gdGhpcy5kZWNvcmF0b3IobmV3IElkZW50aXR5KFxuICAgIGF3YWl0IGp3dC52ZXJpZnkoKGF3YWl0IGp3dC52ZXJpZnkodG9rZW4sIHRoaXMuc2VjcmV0KSkuaWRlbnRpdHksIHRoaXMuc2VjcmV0KVxuICApKVxufVxuIl19
