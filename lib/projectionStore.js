"use strict";function connect(o){return connection||(connection=new Promise(function(n){function e(){0!==mongoose.connection.readyState&&setTimeout(e,5e3),mongoose.connect(o,{useNewUrlParser:!0}).then(function(){console.log("Connected to Mongo"),n()}).catch(function(){setTimeout(e,1e3)})}e()})),connection}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=connect;var mongoose=require("mongoose"),connection=null;mongoose.connection.on("error",function(o){console.log("Mongoose Error",o)}).on("close",function(){console.log("Database connection closed.")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3Rpb25TdG9yZS5qcyJdLCJuYW1lcyI6WyJjb25uZWN0IiwibW9uZ29VcmwiLCJjb25zb2xlIiwiY29ubmVjdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmV0cnkiLCJyZWFkeVN0YXRlIiwibW9uZ29vc2UiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ0aGVuIiwic2V0VGltZW91dCIsImxvZyIsInJlcXVpcmUiLCJvbiIsImVycm9yIl0sIm1hcHBpbmdzIjoiWUFRZSxTQUFBQSxTQUFZQyxHQWtCaEIsTUFqQlBDLGNBTEpDLFdBQUEsR0FBQUMsU0FBQSxTQUFBQyxHQVdNLFFBQVNDLEtBSDJCLElBQWxCTixTQUFRQyxXQUFVTSxZQUNuQ0osV0FBWUcsRUFBQSxLQUViRSxTQUFTRixRQUFRTCxHQUFBUSxpQkFBQSxJQUNmQyxLQUFJRixXQUNGRyxRQUFVQyxJQUFDTixzQkFDWkQsTUFDREcsTUFBU1IsV0FBb0JTLFdBQUFBLEVBQWlCLE9BRzFDSixPQUhKRix5RkFuQlIsSUFBTUssVUFBV0ssUUFBUSxZQUVyQlYsV0FBYSxJQUVqQkssVUFBU0wsV0FDTlcsR0FBRyxRQUFTLFNBQVVDLEdBQ3JCYixRQUFRVSxJQUFJLGlCQUFrQkcsS0FFL0JELEdBQUcsUUFBUyxXQU5YWCxRQUFBQSxJQUFVIiwiZmlsZSI6InByb2plY3Rpb25TdG9yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxubGV0IGNvbm5lY3Rpb24gPSBudWxsO1xuXG5tb25nb29zZS5jb25uZWN0aW9uXG4gIC5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29vc2UgRXJyb3InLCBlcnJvcik7XG4gIH0pXG4gIC5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGNvbm5lY3Rpb24gY2xvc2VkLicpO1xuICB9KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29ubmVjdChtb25nb1VybCkge1xuICBpZiAoIWNvbm5lY3Rpb24pIHtcbiAgICBjb25uZWN0aW9uID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBmdW5jdGlvbiByZXRyeSgpIHtcbiAgICAgICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSAhPT0gMCkge1xuICAgICAgICAgIHNldFRpbWVvdXQocmV0cnksIDUwMDApO1xuICAgICAgICB9XG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nbycpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmV0cnksIDEwMDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0cnkoKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY29ubmVjdGlvbjtcbn1cbiJdfQ==
