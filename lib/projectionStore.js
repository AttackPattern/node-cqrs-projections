"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=connect;var mongoose=require("mongoose"),connection=null;function connect(e){return connection||(connection=new Promise(function(n){!function o(){0!==mongoose.connection.readyState&&setTimeout(o,5e3),mongoose.connect(e,{useNewUrlParser:!0}).then(function(){console.log("Connected to Mongo"),n()}).catch(function(){setTimeout(o,1e3)})}()})),connection}mongoose.set("useFindAndModify",!1),mongoose.connection.on("error",function(o){console.log("Mongoose Error",o)}).on("close",function(){console.log("Database connection closed.")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3Rpb25TdG9yZS5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIm1vbmdvVXJsIiwiY29uc29sZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmV0cnkiLCJyZWFkeVN0YXRlIiwidXNlTmV3VXJsUGFyc2VyIiwidGhlbiIsInNldFRpbWVvdXQiLCJsb2ciLCJzZXQiLCJvbiIsImVycm9yIl0sIm1hcHBpbmdzIjoiNEZBQUEsSUFBTUEsU0FBV0MsUUFBUSxZQUVyQkMsV0FBYSxLQU9GLFNBQUFDLFFBQVlDLEdBa0JoQixPQWpCUEMsYUFMSkgsV0FBQSxJQUFBSSxRQUFBLFNBQUFDLElBV00sU0FBU0MsSUFIMkIsSUFBbEJMLFNBQVFDLFdBQVVLLFlBQ25DUCxXQUFZTSxFQUFBLEtBRWJSLFNBQVNRLFFBQVFKLEVBQUEsQ0FBQU0saUJBQUEsSUFDZkMsS0FBSVgsV0FDRlksUUFBVUMsSUFBQ0wsc0JBQ1pELE1BQ0RQLE1BQVNHLFdBQW9CTyxXQUFBQSxFQUFpQixPQUcxQ0gsTUFISkwsV0FqQlJGLFNBQVNjLElBQUksb0JBQW9CLEdBRWpDZCxTQUFTRSxXQUNOYSxHQUFHLFFBQVMsU0FBVUMsR0FObkJoQixRQUFRYSxJQUFHWixpQkFBakJlLEtBRUFELEdBQUliLFFBQVUsV0FDZEYsUUFBQWEsSUFBYSIsImZpbGUiOiJwcm9qZWN0aW9uU3RvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmxldCBjb25uZWN0aW9uID0gbnVsbDtcbm1vbmdvb3NlLnNldCgndXNlRmluZEFuZE1vZGlmeScsIGZhbHNlKTtcblxubW9uZ29vc2UuY29ubmVjdGlvblxuICAub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ01vbmdvb3NlIEVycm9yJywgZXJyb3IpO1xuICB9KVxuICAub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGNsb3NlZC4nKTtcbiAgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbm5lY3QobW9uZ29VcmwpIHtcbiAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgY29ubmVjdGlvbiA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgZnVuY3Rpb24gcmV0cnkoKSB7XG4gICAgICAgIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgIT09IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5LCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgICBtb25nb29zZS5jb25uZWN0KG1vbmdvVXJsLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTW9uZ28nKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHJ5KCk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59XG4iXX0=
