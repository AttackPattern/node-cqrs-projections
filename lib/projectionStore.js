"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=connect;var mongoose=require("mongoose"),connection=null;function connect(e){return connection=connection||new Promise(function(n){!function o(){0!==mongoose.connection.readyState&&setTimeout(o,5e3),mongoose.connect(e,{useNewUrlParser:!0}).then(function(){console.log("Connected to Mongo"),n()}).catch(function(){setTimeout(o,1e3)})}()})}mongoose.set("useFindAndModify",!1),mongoose.connection.on("error",function(o){console.log("Mongoose Error",o)}).on("close",function(){console.log("Database connection closed.")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3Rpb25TdG9yZS5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIm1vbmdvVXJsIiwiY29uc29sZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmV0cnkiLCJyZWFkeVN0YXRlIiwidXNlTmV3VXJsUGFyc2VyIiwidGhlbiIsInNldFRpbWVvdXQiLCJsb2ciLCJzZXQiLCJvbiIsImVycm9yIl0sIm1hcHBpbmdzIjoiNEZBQUEsSUFBTUEsU0FBV0MsUUFBUSxZQUVyQkMsV0FBYSxLQU9GLFNBQUFDLFFBQVlDLEdBa0JoQixPQXRCWEYsV0FLSUcsWUFMSixJQUFBQyxRQUFBLFNBQUFDLElBV00sU0FBU0MsSUFIMkIsSUFBbEJMLFNBQVFDLFdBQVVLLFlBQ25DUCxXQUFZTSxFQUFBLEtBRWJSLFNBQVNRLFFBQVFKLEVBQUEsQ0FBQU0saUJBQUEsSUFDZkMsS0FBSVgsV0FDRlksUUFBVUMsSUFBQ0wsc0JBQ1pELE1BSEgsTUFJV0osV0FBb0JPLFdBQUFBLEVBQWlCLE9BRzFDSCxLQXBCWlAsU0FBU2MsSUFBSSxvQkFBb0IsR0FFakNkLFNBQVNFLFdBQ05hLEdBQUcsUUFBUyxTQUFVQyxHQU5uQmhCLFFBQVFhLElBQUdaLGlCQUFqQmUsS0FFQUQsR0FBSWIsUUFBVSxXQUNkRixRQUFBYSxJQUFhIiwiZmlsZSI6InByb2plY3Rpb25TdG9yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxubGV0IGNvbm5lY3Rpb24gPSBudWxsO1xubW9uZ29vc2Uuc2V0KCd1c2VGaW5kQW5kTW9kaWZ5JywgZmFsc2UpO1xuXG5tb25nb29zZS5jb25uZWN0aW9uXG4gIC5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29vc2UgRXJyb3InLCBlcnJvcik7XG4gIH0pXG4gIC5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGNvbm5lY3Rpb24gY2xvc2VkLicpO1xuICB9KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29ubmVjdChtb25nb1VybCkge1xuICBpZiAoIWNvbm5lY3Rpb24pIHtcbiAgICBjb25uZWN0aW9uID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBmdW5jdGlvbiByZXRyeSgpIHtcbiAgICAgICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSAhPT0gMCkge1xuICAgICAgICAgIHNldFRpbWVvdXQocmV0cnksIDUwMDApO1xuICAgICAgICB9XG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nbycpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmV0cnksIDEwMDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0cnkoKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY29ubmVjdGlvbjtcbn1cbiJdfQ==
