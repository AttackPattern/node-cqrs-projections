"use strict";function connect(o){return connection||(connection=new Promise(function(n){function e(){0!==mongoose.connection.readyState&&setTimeout(e,5e3),mongoose.connect(o).then(function(){console.log("Connected to Mongo"),n()}).catch(function(){setTimeout(e,1e3)})}e()})),connection}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=connect;var mongoose=require("mongoose"),connection=null;mongoose.connection.on("error",function(o){console.log("Mongoose Error",o)}).on("close",function(){console.log("Database connection closed.")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3Rpb25TdG9yZS5qcyJdLCJuYW1lcyI6WyJjb25uZWN0IiwibW9uZ29VcmwiLCJjb25uZWN0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXRyeSIsIm1vbmdvb3NlIiwicmVhZHlTdGF0ZSIsInNldFRpbWVvdXQiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwicmVxdWlyZSIsIm9uIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJZQVl3QkEsU0FBUUMsU0FBVUEsR0FtQnhDLE1BbEJLQyxjQUNIQSxXQUFhLEdBQUlDLFNBQVEsU0FBQUMsR0FDdkIsUUFBU0MsS0FDZ0MsSUFBbkNDLFNBQVNKLFdBQVdLLFlBQ3RCQyxXQUFXSCxFQUFPLEtBRXBCQyxTQUFTTixRQUFRQyxHQUNkUSxLQUFLLFdBQ0pDLFFBQVFDLElBQUksc0JBQ1pQLE1BRURRLE1BQU0sV0FDTEosV0FBV0gsRUFBTyxPQUd4QkEsT0FHR0gseUZBL0JULElBQU1JLFVBQVdPLFFBQVEsWUFFckJYLFdBQWEsSUFFakJJLFVBQVNKLFdBQ0hZLEdBQUEsUUFBUyxTQUFVQyxHQUNyQkwsUUFBUUMsSUFBSSxpQkFBa0JJLEtBRTVCRCxHQUFBLFFBQVMsV0FDWEosUUFBUUMsSUFBSSIsImZpbGUiOiJwcm9qZWN0aW9uU3RvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmxldCBjb25uZWN0aW9uID0gbnVsbDtcblxubW9uZ29vc2UuY29ubmVjdGlvblxuICAub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ01vbmdvb3NlIEVycm9yJywgZXJyb3IpO1xuICB9KVxuICAub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25uZWN0aW9uIGNsb3NlZC4nKTtcbiAgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbm5lY3QobW9uZ29VcmwpIHtcbiAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgY29ubmVjdGlvbiA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgZnVuY3Rpb24gcmV0cnkoKSB7XG4gICAgICAgIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgIT09IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5LCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgICBtb25nb29zZS5jb25uZWN0KG1vbmdvVXJsKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTW9uZ28nKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5LCAxMDAwKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHJ5KCk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59XG4iXX0=
